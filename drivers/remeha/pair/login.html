<script type="application/javascript">
    function login() {
        var email = document.getElementById('email').value
        var password = document.getElementById('password').value
        Homey.showLoadingOverlay()
        Homey.emit('login', `${email}:${password}`).then((success) => {
            if (success) {
                Homey.showView('list_devices')
            } else {
                Homey.alert(Homey.__('pair.login_error'), 'error')
                Homey.done()
            }
        }).catch(error => {
            Homey.alert(Homey.__('pair.login_error'), 'error')
            Homey.done()
        }).finally(() => {
            Homey.hideLoadingOverlay()
        })
    }
</script>

<header class="homey-header">
    <h1 class="homey-title" data-i18n="pair.title"></h1>
</header>

<p data-i18n="pair.description"></p>

<form class="homey-form">
    <fieldset class="homey-form-fieldset">
        <div class="homey-form-group">
            <label class="homey-form-label" for="email" data-i18n="pair.email"></label>
            <input class="homey-form-input" id="email" type="email" autocomplete="email" value="" />
        </div>
        <div class="homey-form-group">
            <label class="homey-form-label" for="password" data-i18n="pair.password"></label>
            <input class="homey-form-input" id="password" type="password" autocomplete="current-password" value="" />
        </div>
    </fieldset>
</form>

<br/>

<button class="homey-button-primary-full" onclick="login()" data-i18n="pair.submit"></button>
